{"remainingRequest":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/shared/TextEditor/TextEditor.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/ash/Documents/cloudrun/second/frontend/src/components/shared/TextEditor/TextEditor.vue","mtime":1601932087349},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgb25Nb3VudGVkLCByZWYsIHdhdGNoIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCBRdWlsbCBmcm9tICdxdWlsbCcKaW1wb3J0IHsgcXVpbGxDb25maWcgfSBmcm9tICcuL2VkaXRvcicKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBuYW1lOiAnai10ZXh0LWVkaXRvcicsCiAgcHJvcHM6IHsKICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBkZWZhdWx0VmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgY29uc3QgcXVpbGwgPSByZWY8UXVpbGw+KG51bGwpCiAgICBjb25zdCBlZGl0b3JSZWYgPSByZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpCiAgICBjb25zdCBpbml0aWFsVmFsdWUgPSByZWY8c3RyaW5nPihwcm9wcy52YWx1ZSB8fCBwcm9wcy5kZWZhdWx0VmFsdWUpCgogICAgY29uc3QgaW5pdFF1aWxsID0gKCkgPT4gewogICAgICByZXR1cm4gbmV3IFF1aWxsKGVkaXRvclJlZi52YWx1ZSBhcyBIVE1MRGl2RWxlbWVudCwgewogICAgICAgIHBsYWNlaG9sZGVyOiBwcm9wcy5wbGFjZWhvbGRlciwKICAgICAgICAuLi5xdWlsbENvbmZpZwogICAgICB9KQogICAgfQoKICAgIGNvbnN0IGVuYWJsZVdyaXRlTW9kZSA9ICgpID0+IHsKICAgICAgZW1pdCgnY2hhbmdlTW9kZScsICd3cml0ZScpCiAgICB9CgogICAgY29uc3QgaW5zZXJ0VmFsdWUgPSAocXVpbGw6IFF1aWxsLCB2YWx1ZTogc3RyaW5nKSA9PiB7CiAgICAgIHF1aWxsLmNsaXBib2FyZC5kYW5nZXJvdXNseVBhc3RlSFRNTCgwLCB2YWx1ZSkKICAgICAgcXVpbGwuYmx1cigpCiAgICB9CgogICAgY29uc3QgZ2V0SFRNTFZhbHVlID0gKCkgPT4KICAgICAgKGVkaXRvclJlZi52YWx1ZSBhcyBIVE1MRGl2RWxlbWVudCkucXVlcnlTZWxlY3RvcignLnFsLWVkaXRvcicpPy5pbm5lckhUTUwKCiAgICBjb25zdCBoYW5kbGVDb250ZW50c0NoYW5nZSA9ICgpID0+IHsKICAgICAgZW1pdCgnaW5wdXQnLCBnZXRIVE1MVmFsdWUoKSkKICAgIH0KCiAgICB3YXRjaCgKICAgICAgKCkgPT4gcHJvcHMubW9kZSwKICAgICAgKF8sIGZyb20pID0+IHsKICAgICAgICBpZiAoZnJvbSA9PSAnd3JpdGUnKSB7CiAgICAgICAgICBxdWlsbC52YWx1ZT8uc2V0VGV4dCgnJykKICAgICAgICAgIGluc2VydFZhbHVlKHF1aWxsLnZhbHVlIGFzIFF1aWxsLCBwcm9wcy52YWx1ZSkKICAgICAgICAgIGluaXRpYWxWYWx1ZS52YWx1ZSA9IHByb3BzLnZhbHVlCiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgbGF6eTogdHJ1ZQogICAgICB9CiAgICApCgogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgcXVpbGwudmFsdWUgPSBpbml0UXVpbGwoKQogICAgICBpbnNlcnRWYWx1ZShxdWlsbC52YWx1ZSwgaW5pdGlhbFZhbHVlLnZhbHVlKQogICAgICBxdWlsbC52YWx1ZS5vbigndGV4dC1jaGFuZ2UnLCBoYW5kbGVDb250ZW50c0NoYW5nZSkKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBxdWlsbC52YWx1ZT8ub2ZmKCd0ZXh0LWNoYW5nZScsIGhhbmRsZUNvbnRlbnRzQ2hhbmdlKQogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIHF1aWxsLnZhbHVlID0gbnVsbCBhcyBhbnkKICAgICAgfQogICAgfSkKICAgIHJldHVybiB7CiAgICAgIGVkaXRvclJlZiwKICAgICAgZ2V0SFRNTFZhbHVlLAogICAgICBpbml0aWFsVmFsdWUsCiAgICAgIGVuYWJsZVdyaXRlTW9kZQogICAgfQogIH0KfSkK"},{"version":3,"sources":["TextEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TextEditor.vue","sourceRoot":"src/components/shared/TextEditor","sourcesContent":["<template>\n  <div>\n    <div v-show=\"mode == 'write'\" class=\"ql\">\n      <div ref=\"editorRef\"></div>\n    </div>\n    <div v-if=\"mode == 'read'\" class=\"ql-snow\">\n      <div\n        @click=\"enableWriteMode\"\n        class=\"content ql-editor\"\n        v-html=\"initialValue ? initialValue : 'Add a description'\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref, watch } from '@vue/composition-api'\nimport Quill from 'quill'\nimport { quillConfig } from './editor'\nexport default defineComponent({\n  name: 'j-text-editor',\n  props: {\n    placeholder: {\n      type: String,\n      default: undefined\n    },\n    value: {\n      type: String,\n      default: undefined\n    },\n    defaultValue: {\n      type: String,\n      default: undefined\n    },\n    mode: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props, { emit }) {\n    const quill = ref<Quill>(null)\n    const editorRef = ref<HTMLDivElement>(null)\n    const initialValue = ref<string>(props.value || props.defaultValue)\n\n    const initQuill = () => {\n      return new Quill(editorRef.value as HTMLDivElement, {\n        placeholder: props.placeholder,\n        ...quillConfig\n      })\n    }\n\n    const enableWriteMode = () => {\n      emit('changeMode', 'write')\n    }\n\n    const insertValue = (quill: Quill, value: string) => {\n      quill.clipboard.dangerouslyPasteHTML(0, value)\n      quill.blur()\n    }\n\n    const getHTMLValue = () =>\n      (editorRef.value as HTMLDivElement).querySelector('.ql-editor')?.innerHTML\n\n    const handleContentsChange = () => {\n      emit('input', getHTMLValue())\n    }\n\n    watch(\n      () => props.mode,\n      (_, from) => {\n        if (from == 'write') {\n          quill.value?.setText('')\n          insertValue(quill.value as Quill, props.value)\n          initialValue.value = props.value\n        }\n      },\n      {\n        lazy: true\n      }\n    )\n\n    onMounted(() => {\n      quill.value = initQuill()\n      insertValue(quill.value, initialValue.value)\n      quill.value.on('text-change', handleContentsChange)\n      return () => {\n        quill.value?.off('text-change', handleContentsChange)\n        // eslint-disable-next-line\n        quill.value = null as any\n      }\n    })\n    return {\n      editorRef,\n      getHTMLValue,\n      initialValue,\n      enableWriteMode\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n.ql {\n  .ql-toolbar {\n    border-radius: 4px 4px 0px 0px !important;\n    border: 1px solid #dfe1e6 !important;\n    border-bottom: none !important;\n  }\n  .ql-container.ql-snow {\n    color: #172b4d;\n    font-size: 15px;\n    border-radius: 0px 0px 4px 4px;\n    border: 1px solid #dfe1e6;\n    border-top: none;\n  }\n}\n.ql-editor {\n  // min-height: 110px;\n  font-family: 'CircularStd', -apple-system, BlinkMacSystemFont, 'Segoe UI',\n    Roboto, 'Helvetica Neue', Helvetica, Arial, sans-serif, 'CircularStd';\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-weight: bold;\n  }\n  img,\n  video {\n    display: inline-block;\n  }\n}\n.content {\n  padding: 0 !important;\n  font-size: 15px;\n}\n</style>\n"]}]}