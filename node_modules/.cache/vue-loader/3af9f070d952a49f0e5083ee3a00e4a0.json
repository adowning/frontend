{"remainingRequest":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/shared/Select/Dropdown.vue?vue&type=style&index=0&id=7c2ea32a&scoped=true&lang=scss&","dependencies":[{"path":"/home/ash/Documents/cloudrun/second/frontend/src/components/shared/Select/Dropdown.vue","mtime":1601932087349},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZHJvcGRvd24gewogIHotaW5kZXg6IDEwMTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiBjYWxjKDEwMCUgKyA0cHgpOwogIGxlZnQ6IC0xcHg7CiAgYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7CiAgYmFja2dyb3VuZDogI2ZmZjsKICBib3gtc2hhZG93OiByZ2JhKDksIDMwLCA2NiwgMC4yNSkgMHB4IDRweCA4cHggLTJweCwKICAgIHJnYmEoOSwgMzAsIDY2LCAwLjMxKSAwcHggMHB4IDFweDsKICB3aWR0aDogMTAwJTsKfQoKLmRyb3Bkb3duSW5wdXQgewogIHBhZGRpbmc6IDEwcHggMTRweCA4cHg7CiAgd2lkdGg6IDEwMCU7CiAgYm9yZGVyOiBub25lOwogIGNvbG9yOiAjMTcyYjRkOwogIGJhY2tncm91bmQ6IG5vbmU7CiAgJjpmb2N1cyB7CiAgICBvdXRsaW5lOiBub25lOwogIH0KfQoKLm9wdGlvbnMgewogIHBhZGRpbmc6IDVweCAwOwogIG1heC1oZWlnaHQ6IDIwMHB4OwogIG92ZXJmbG93LXg6IGhpZGRlbjsKICBvdmVyZmxvdy15OiBhdXRvOwogIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDsKICAvLyAmOjotd2Via2l0LXNjcm9sbGJhciB7CiAgLy8gICB3aWR0aDogN3B4OwogIC8vIH0KICAvLyAmOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7CiAgLy8gICBiYWNrZ3JvdW5kOiBub25lOwogIC8vIH0KICAvLyAmOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7CiAgLy8gICAvLyBib3JkZXItcmFkaXVzOiA5OXB4OwogIC8vICAgYmFja2dyb3VuZDogI2QxZDFkMTsKICAvLyB9Cn0KCi5vcHRpb24gewogIHBhZGRpbmc6IDhweCAxNHB4OwogIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7CiAgY3Vyc29yOiBwb2ludGVyOwogICYuc2VsZWN0LW9wdGlvbi1pcy1hY3RpdmUgewogICAgYmFja2dyb3VuZDogI2U4ZWNlZTsKICB9Cn0KCi5vcHRpb25zTm9SZXN1bHRzIHsKICBwYWRkaW5nOiAwcHggMTVweCAxMHB4OwogIGNvbG9yOiAjODk5M2E0Owp9Cg=="},{"version":3,"sources":["Dropdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Dropdown.vue","sourceRoot":"src/components/shared/Select","sourcesContent":["<template>\n  <div class=\"dropdown\" :style=\"{ width: `${dropdownWidth}px` }\">\n    <input\n      v-if=\"searchable\"\n      class=\"dropdownInput\"\n      type=\"text\"\n      ref=\"inputRef\"\n      placeholder=\"Search\"\n      @input=\"handleSearchValueChange\"\n      @keydown=\"handleInputKeyDown\"\n    />\n\n    <div class=\"options\" ref=\"optionsRef\">\n      <div\n        class=\"option text-textDarkest\"\n        v-for=\"option in filteredOptions\"\n        :key=\"option.value\"\n        :data-select-option-value=\"option.value\"\n        :data-testid=\"`select-option:${option.label}`\"\n        @mouseenter=\"handleOptionMouseEnter\"\n        @click=\"selectOptionValue(option.value)\"\n      >\n        <slot name=\"option\" v-bind=\"option\">{{ option.label }}</slot>\n      </div>\n\n      <div\n        v-if=\"isOptionCreatable\"\n        class=\"option text-textDarkest\"\n        :data-create-option-label=\"{ searchValue }\"\n        @mouseenter=\"handleOptionMouseEnter\"\n        @click=\"createOption(searchValue)\"\n      >\n        {{\n          isCreatingOption\n            ? `Creating \"${searchValue}\"...`\n            : `Create\n        \"${searchValue}\"`\n        }}\n      </div>\n    </div>\n\n    <div v-if=\"filteredOptions.length === 0\" class=\"optionsNoResults\">\n      No results\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, onMounted } from '@vue/composition-api'\nconst activeOptionClass = 'select-option-is-active'\n\ninterface Option {\n  label: string\n  value: number | string\n}\n\nexport default defineComponent({\n  props: {\n    dropdownWidth: {\n      type: Number,\n      default: undefined\n    },\n    value: {\n      type: [Array, String, Number],\n      default: undefined\n    },\n    isValueEmpty: {\n      type: Boolean,\n      required: true\n    },\n    searchable: {\n      type: Boolean,\n      default: false\n    },\n    searchValue: {\n      type: String,\n      required: true\n    },\n    deactivateDropdown: {\n      type: Function,\n      required: true\n    },\n    options: {\n      type: Array as () => Array<Option>,\n      required: true\n    },\n    onCreate: {\n      type: Function,\n      default: undefined\n    },\n    isMulti: {\n      type: Boolean,\n      required: true\n    },\n    withClearValue: {\n      type: Boolean,\n      required: true\n    }\n  },\n  setup(props, { emit, root }) {\n    const isCreatingOption = ref<boolean>(false)\n    const optionsRef = ref<HTMLDivElement>(null)\n\n    const optionsFilteredBySearchValue = computed(() =>\n      props.options.filter(option =>\n        option.label\n          .toString()\n          .toLowerCase()\n          .includes(props.searchValue.toLowerCase())\n      )\n    )\n\n    const filteredOptions = computed(() =>\n      props.isMulti\n        ? optionsFilteredBySearchValue.value.filter(\n            option => !(props.value as [string | number]).includes(option.value)\n          )\n        : optionsFilteredBySearchValue.value.filter(\n            option => props.value !== option.value\n          )\n    )\n\n    const isOptionCreatable = computed(\n      () =>\n        props.onCreate &&\n        props.searchValue &&\n        !props.options.map(option => option.label).includes(props.searchValue)\n    )\n\n    const handleSearchValueChange = (event: InputEvent) => {\n      emit('searchValueChange', (event.target as HTMLInputElement).value)\n    }\n\n    const getActiveOptionNode = async () => {\n      await root.$nextTick()\n      return optionsRef.value\n        ? optionsRef.value.querySelector(`.${activeOptionClass}`)\n        : null\n    }\n\n    const selectOptionValue = (\n      optionValue: string | Array<number | string> | number\n    ) => {\n      if (props.isMulti) {\n        emit('change', [\n          ...new Set([...(props.value as Array<string | number>), optionValue])\n        ])\n      } else {\n        props.deactivateDropdown()\n        emit('change', optionValue)\n      }\n    }\n\n    const createOption = (newOptionLabel: string) => {\n      isCreatingOption.value = true\n      props.onCreate(\n        newOptionLabel,\n        (createdOptionValue: string | Array<number | string> | number) => {\n          isCreatingOption.value = false\n          selectOptionValue(createdOptionValue)\n        }\n      )\n    }\n\n    const handleInputEnterKeyDown = async (event: KeyboardEvent) => {\n      event.preventDefault()\n\n      const $active = await getActiveOptionNode()\n      if (!$active) return\n\n      const optionValueToSelect = $active.getAttribute(\n        'data-select-option-value'\n      )\n      const optionLabelToCreate = $active.getAttribute(\n        'data-create-option-label'\n      )\n\n      if (optionValueToSelect) {\n        selectOptionValue(optionValueToSelect)\n      } else if (optionLabelToCreate) {\n        createOption(optionLabelToCreate)\n      }\n    }\n\n    const handleInputArrowUpOrDownKeyDown = async (event: KeyboardEvent) => {\n      const $active = (await getActiveOptionNode()) as HTMLElement\n      const $options = optionsRef.value\n      if (!$active || !$options) return\n\n      const $optionsHeight = $options.getBoundingClientRect().height\n      const $activeHeight = $active.getBoundingClientRect().height\n\n      if (event.keyCode === 40) {\n        if ($options.lastElementChild === $active) {\n          $active.classList.remove(activeOptionClass)\n          $options.firstElementChild?.classList.add(activeOptionClass)\n          $options.scrollTop = 0\n        } else {\n          $active.classList.remove(activeOptionClass)\n          $active.nextElementSibling?.classList.add(activeOptionClass)\n          if ($active.offsetTop > $options.scrollTop + $optionsHeight / 1.4) {\n            $options.scrollTop += $activeHeight\n          }\n        }\n      } else if (event.keyCode === 38) {\n        if ($options.firstElementChild === $active) {\n          $active.classList.remove(activeOptionClass)\n          $options.lastElementChild?.classList.add(activeOptionClass)\n          $options.scrollTop = $options.scrollHeight\n        } else {\n          $active.classList.remove(activeOptionClass)\n          $active.previousElementSibling?.classList.add(activeOptionClass)\n          if ($active.offsetTop < $options.scrollTop + $optionsHeight / 2.4) {\n            $options.scrollTop -= $activeHeight\n          }\n        }\n      }\n    }\n\n    const handleInputEscapeKeyDown = (event: KeyboardEvent) => {\n      event.stopImmediatePropagation()\n      props.deactivateDropdown()\n    }\n    const handleInputKeyDown = (event: KeyboardEvent) => {\n      if (event.keyCode === 27) {\n        handleInputEscapeKeyDown(event)\n      } else if (event.keyCode === 13) {\n        handleInputEnterKeyDown(event)\n      } else if (event.keyCode === 40 || event.keyCode === 38) {\n        handleInputArrowUpOrDownKeyDown(event)\n      }\n    }\n\n    const handleOptionMouseEnter = async (event: MouseEvent) => {\n      const $active = await getActiveOptionNode()\n      if ($active) $active.classList.remove(activeOptionClass)\n      ;(event.currentTarget as HTMLElement).classList.add(activeOptionClass)\n    }\n\n    const setFirstOptionAsActive = async () => {\n      const $active = await getActiveOptionNode()\n      if (!optionsRef.value) return\n      if ($active) $active.classList.remove(activeOptionClass)\n\n      if (optionsRef.value.firstElementChild) {\n        optionsRef.value.firstElementChild.classList.add(activeOptionClass)\n      }\n    }\n\n    onMounted(() => {\n      setFirstOptionAsActive()\n    })\n\n    return {\n      optionsRef,\n      isCreatingOption,\n      optionsFilteredBySearchValue,\n      filteredOptions,\n      isOptionCreatable,\n      getActiveOptionNode,\n      selectOptionValue,\n      handleSearchValueChange,\n      handleInputEnterKeyDown,\n      handleInputArrowUpOrDownKeyDown,\n      handleInputKeyDown,\n      handleOptionMouseEnter\n    }\n  }\n})\n</script>\n\n<style scoped lang=\"scss\">\n.dropdown {\n  z-index: 101;\n  position: absolute;\n  top: calc(100% + 4px);\n  left: -1px;\n  border-radius: 0 0 4px 4px;\n  background: #fff;\n  box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px,\n    rgba(9, 30, 66, 0.31) 0px 0px 1px;\n  width: 100%;\n}\n\n.dropdownInput {\n  padding: 10px 14px 8px;\n  width: 100%;\n  border: none;\n  color: #172b4d;\n  background: none;\n  &:focus {\n    outline: none;\n  }\n}\n\n.options {\n  padding: 5px 0;\n  max-height: 200px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  // &::-webkit-scrollbar {\n  //   width: 7px;\n  // }\n  // &::-webkit-scrollbar-track {\n  //   background: none;\n  // }\n  // &::-webkit-scrollbar-thumb {\n  //   // border-radius: 99px;\n  //   background: #d1d1d1;\n  // }\n}\n\n.option {\n  padding: 8px 14px;\n  word-break: break-word;\n  cursor: pointer;\n  &.select-option-is-active {\n    background: #e8ecee;\n  }\n}\n\n.optionsNoResults {\n  padding: 0px 15px 10px;\n  color: #8993a4;\n}\n</style>\n"]}]}