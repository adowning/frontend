{"remainingRequest":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/Project/Workorder/WorkorderDetails/AssigneesReporter.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/ash/Documents/cloudrun/second/frontend/src/components/Project/Workorder/WorkorderDetails/AssigneesReporter.vue","mtime":1601934218213},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGNvbXB1dGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7IGdldHRlcnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdG9yZScKaW1wb3J0IE9taXQgZnJvbSAnbG9kYXNoLm9taXQnCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgcHJvcHM6IHsKICAgIHJlcG9ydGVySWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHVzZXJJZHM6IHsKICAgICAgdHlwZTogQXJyYXkgYXMgKCkgPT4gQXJyYXk8c3RyaW5nPiwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB1cGRhdGV3b3Jrb3JkZXI6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBzZXR1cChwcm9wcykgewogICAgY29uc3QgcHJvamVjdCA9IGNvbXB1dGVkKGdldHRlcnMucHJvamVjdCkKICAgIGNvbnN0IHVzZXJPcHRpb25zID0gcHJvamVjdC52YWx1ZS51c2Vycy5tYXAodXNlciA9PiAoewogICAgICBsYWJlbDogdXNlci5uYW1lLAogICAgICB2YWx1ZTogdXNlci5pZCwKICAgICAgdXNlcgogICAgfSkpCiAgICBjb25zdCBnZXRVc2VyQnlJZCA9ICh1c2VySWQ6IHN0cmluZykgPT4KICAgICAgT21pdCgKICAgICAgICBwcm9qZWN0LnZhbHVlLnVzZXJzLmZpbmQodXNlciA9PiB1c2VyLmlkID09PSB1c2VySWQpLAogICAgICAgIFsnX190eXBlbmFtZSddCiAgICAgICkKICAgIGNvbnN0IHVwZGF0ZXdvcmtvcmRlclJlcG9ydGVyID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgcHJvcHMudXBkYXRld29ya29yZGVyKHsgcmVwb3J0ZXJJZDogdXNlcklkIH0pCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcikKICAgICAgfQogICAgfQogICAgY29uc3QgdXBkYXRld29ya29yZGVyQXNzaWduZWVzID0gYXN5bmMgKHVzZXJJZHM6IFtzdHJpbmddKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgcHJvcHMudXBkYXRld29ya29yZGVyKHsKICAgICAgICAgIHVzZXJJZHMsCiAgICAgICAgICB1c2VyczogdXNlcklkcy5tYXAoZ2V0VXNlckJ5SWQpCiAgICAgICAgfSkKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgdXNlck9wdGlvbnMsCiAgICAgIHVwZGF0ZXdvcmtvcmRlclJlcG9ydGVyLAogICAgICB1cGRhdGV3b3Jrb3JkZXJBc3NpZ25lZXMKICAgIH0KICB9Cn0pCg=="},{"version":3,"sources":["AssigneesReporter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AssigneesReporter.vue","sourceRoot":"src/components/Project/Workorder/WorkorderDetails","sourcesContent":["<template>\n  <div>\n    <div class=\"mt-6 mb-1 uppercase text-textMedium text-13 font-bold\">\n      Reporter\n    </div>\n    <j-select\n      searchable\n      variant=\"empty\"\n      :withClearValue=\"false\"\n      :dropdownWidth=\"300\"\n      :value=\"reporterId\"\n      :options=\"userOptions\"\n      customRender\n      customRenderOption\n      @change=\"updateworkorderReporter\"\n    >\n      <template v-slot:default=\"{ user }\">\n        <j-button variant=\"secondary\">\n          <div class=\"flex items-center\">\n            <j-avatar\n              :size=\"20\"\n              :avatarUrl=\"user.avatarUrl\"\n              :name=\"user.name\"\n            />\n            <div class=\"ml-1-5 mr-1\">\n              {{ user.name }}\n            </div>\n          </div>\n        </j-button>\n      </template>\n      <template v-slot:option=\"{ user }\">\n        <div class=\"my-px mr-4 flex items-center\">\n          <j-avatar :size=\"20\" :avatarUrl=\"user.avatarUrl\" :name=\"user.name\" />\n          <div class=\"ml-1-5 mr-1\">\n            {{ user.name }}\n          </div>\n        </div>\n      </template>\n    </j-select>\n    <!-- ASSIGNEES -->\n    <div class=\"mt-6 mb-1 uppercase text-textMedium text-13 font-bold\">\n      Assignees\n    </div>\n    <j-select\n      searchable\n      variant=\"empty\"\n      isMulti\n      :withClearValue=\"false\"\n      :dropdownWidth=\"300\"\n      :value=\"userIds\"\n      :options=\"userOptions\"\n      customRender\n      customRenderOption\n      @change=\"updateworkorderAssignees\"\n    >\n      <template v-slot:default=\"{ user, remove, optionValue }\">\n        <j-button variant=\"secondary\">\n          <div class=\"flex items-center\">\n            <j-avatar\n              :size=\"20\"\n              :avatarUrl=\"user.avatarUrl\"\n              :name=\"user.name\"\n            />\n            <div class=\"ml-1-5 mr-1.5\">\n              {{ user.name }}\n            </div>\n            <j-icon\n              v-if=\"remove\"\n              @click=\"remove(optionValue)\"\n              class=\"text-textLight\"\n              :size=\"20\"\n              name=\"times\"\n            ></j-icon>\n          </div>\n        </j-button>\n      </template>\n      <template v-slot:option=\"{ user }\">\n        <div class=\"my-px mr-4 flex items-center\">\n          <j-avatar :size=\"20\" :avatarUrl=\"user.avatarUrl\" :name=\"user.name\" />\n          <div class=\"ml-1-5 mr-1\">\n            {{ user.name }}\n          </div>\n        </div>\n      </template>\n    </j-select>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from '@vue/composition-api'\nimport { getters } from '../../../../store'\nimport Omit from 'lodash.omit'\nexport default defineComponent({\n  props: {\n    reporterId: {\n      type: String,\n      required: true\n    },\n    userIds: {\n      type: Array as () => Array<string>,\n      required: true\n    },\n    updateworkorder: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const project = computed(getters.project)\n    const userOptions = project.value.users.map(user => ({\n      label: user.name,\n      value: user.id,\n      user\n    }))\n    const getUserById = (userId: string) =>\n      Omit(\n        project.value.users.find(user => user.id === userId),\n        ['__typename']\n      )\n    const updateworkorderReporter = async (userId: string) => {\n      try {\n        await props.updateworkorder({ reporterId: userId })\n      } catch (error) {\n        console.error(error)\n      }\n    }\n    const updateworkorderAssignees = async (userIds: [string]) => {\n      try {\n        await props.updateworkorder({\n          userIds,\n          users: userIds.map(getUserById)\n        })\n      } catch (error) {\n        console.error(error)\n      }\n    }\n\n    return {\n      userOptions,\n      updateworkorderReporter,\n      updateworkorderAssignees\n    }\n  }\n})\n</script>\n\n<style></style>\n"]}]}