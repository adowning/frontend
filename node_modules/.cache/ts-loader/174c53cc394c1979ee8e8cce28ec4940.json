{"remainingRequest":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js!/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js??ref--14-2!/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/Project/Workorder/WorkorderCreate/WorkorderCreate.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/ash/Documents/cloudrun/second/frontend/src/components/Project/Workorder/WorkorderCreate/WorkorderCreate.vue","mtime":1601934632143},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2FzaC9Eb2N1bWVudHMvY2xvdWRydW4vc2Vjb25kL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYXNoL0RvY3VtZW50cy9jbG91ZHJ1bi9zZWNvbmQvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGNvbXB1dGVkLCByZWFjdGl2ZSwgcmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBnZXR0ZXJzLCBtdXRhdGlvbnMgfSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgV29ya29yZGVyVHlwZSwgV29ya29yZGVyUHJpb3JpdHksIFdvcmtvcmRlclByaW9yaXR5Q29weSwgV29ya29yZGVyVHlwZUNvcHksIFdvcmtvcmRlclN0YXR1cyB9IGZyb20gJ0AvdHlwZXMvd29ya29yZGVyJzsKaW1wb3J0IHsgV29ya29yZGVyUHJpb3JpdHlDb2xvcnMgfSBmcm9tICdAL3V0aWxzL2NvbG9ycyc7CmltcG9ydCB7IHVzZU11dGF0aW9uLCB1c2VRdWVyeSB9IGZyb20gJ0B2dWUvYXBvbGxvLWNvbXBvc2FibGUnOwppbXBvcnQgeyBjcmVhdGVXb3Jrb3JkZXIsIGdldFByb2plY3RXb3Jrb3JkZXJzIH0gZnJvbSAnQC9ncmFwaHFsL3F1ZXJpZXMvd29ya29yZGVyJzsKaW1wb3J0IE9taXQgZnJvbSAnbG9kYXNoLm9taXQnOwppbXBvcnQgeyBzdWNjZXNzVG9hc3QgfSBmcm9tICcuLi8uLi8uLi8uLi9wbHVnaW5zL3RvYXN0JzsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoXywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICB2YXIgcHJvamVjdCA9IGNvbXB1dGVkKGdldHRlcnMucHJvamVjdCk7CiAgICB2YXIgY3VycmVudFVzZXIgPSBjb21wdXRlZChnZXR0ZXJzLmN1cnJlbnRVc2VyKTsKICAgIHZhciBwcm9qZWN0VXNlcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghcHJvamVjdC52YWx1ZSkgcmV0dXJuIFtdOwogICAgICByZXR1cm4gcHJvamVjdC52YWx1ZS51c2Vycy5tYXAoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IHVzZXIuaWQsCiAgICAgICAgICBsYWJlbDogdXNlci5uYW1lLAogICAgICAgICAgdXNlcjogdXNlcgogICAgICAgIH07CiAgICAgIH0pOwogICAgfSk7CiAgICB2YXIgZGVmYXVsdFdvcmtvcmRlclZhbHVlcyA9IHsKICAgICAgdHlwZTogV29ya29yZGVyVHlwZS5UQVNLLAogICAgICB0aXRsZTogJycsCiAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgcmVwb3J0ZXJJZDogY3VycmVudFVzZXIudmFsdWUuaWQsCiAgICAgIHVzZXJJZHM6IFtdLAogICAgICBwcmlvcml0eTogV29ya29yZGVyUHJpb3JpdHkuTUVESVVNCiAgICB9OwogICAgdmFyIFdvcmtvcmRlckNyZWF0ZU9iamVjdCA9IHJlYWN0aXZlKGRlZmF1bHRXb3Jrb3JkZXJWYWx1ZXMpOwoKICAgIHZhciBpc1JlcXVpcmVkID0gZnVuY3Rpb24gaXNSZXF1aXJlZCh2YWx1ZSkgewogICAgICByZXR1cm4gWycnLCBudWxsLCB1bmRlZmluZWRdLmluZGV4T2YodmFsdWUpID09PSAtMTsKICAgIH07CgogICAgdmFyIGlzVmFsaWREVE8gPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpc1JlcXVpcmVkKFdvcmtvcmRlckNyZWF0ZU9iamVjdC50eXBlKSAmJiBpc1JlcXVpcmVkKFdvcmtvcmRlckNyZWF0ZU9iamVjdC50aXRsZSkgJiYgaXNSZXF1aXJlZChXb3Jrb3JkZXJDcmVhdGVPYmplY3QucmVwb3J0ZXJJZCkgJiYgaXNSZXF1aXJlZChXb3Jrb3JkZXJDcmVhdGVPYmplY3QucHJpb3JpdHkpOwogICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQoKICAgIHZhciBzZXRGaWVsZFZhbHVlID0gZnVuY3Rpb24gc2V0RmllbGRWYWx1ZShmaWVsZCwgdmFsdWUpIHsKICAgICAgV29ya29yZGVyQ3JlYXRlT2JqZWN0W2ZpZWxkXSA9IHZhbHVlOwogICAgfTsKCiAgICB2YXIgbG9hZGluZyA9IHJlZihmYWxzZSk7CgogICAgdmFyIF91c2VNdXRhdGlvbiA9IHVzZU11dGF0aW9uKGNyZWF0ZVdvcmtvcmRlciksCiAgICAgICAgbXV0YXRlID0gX3VzZU11dGF0aW9uLm11dGF0ZSwKICAgICAgICBpc011dGF0aW9uTG9hZGluZyA9IF91c2VNdXRhdGlvbi5sb2FkaW5nOwoKICAgIHZhciBfdXNlUXVlcnkgPSB1c2VRdWVyeShnZXRQcm9qZWN0V29ya29yZGVycyksCiAgICAgICAgZmV0Y2hQcm9qZWN0V29ya29yZGVycyA9IF91c2VRdWVyeS5yZWZldGNoLAogICAgICAgIGlzRmV0Y2hXb3Jrb3JkZXJzTG9hZGluZyA9IF91c2VRdWVyeS5sb2FkaW5nOwoKICAgIHZhciBpc1dvcmtpbmcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBsb2FkaW5nLnZhbHVlICYmIGlzRmV0Y2hXb3Jrb3JkZXJzTG9hZGluZyAmJiBpc011dGF0aW9uTG9hZGluZzsKICAgIH0pOwoKICAgIHZhciBnZXRVc2VyQnlJZCA9IGZ1bmN0aW9uIGdldFVzZXJCeUlkKHVzZXJJZCkgewogICAgICByZXR1cm4gT21pdChwcm9qZWN0LnZhbHVlLnVzZXJzLmZpbmQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICByZXR1cm4gdXNlci5pZCA9PT0gdXNlcklkOwogICAgICB9KSwgWydfX3R5cGVuYW1lJywgJ25hbWUnLCAnYXZhdGFyVXJsJywgJ3Byb2plY3RJZCddKTsKICAgIH07CgogICAgdmFyIGhhbmRsZVN1Ym1pdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgV29ya29yZGVyLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBXb3Jrb3JkZXIgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIFdvcmtvcmRlckNyZWF0ZU9iamVjdCksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHN0YXR1czogV29ya29yZGVyU3RhdHVzLkJBQ0tMT0csCiAgICAgICAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdC52YWx1ZS5pZCwKICAgICAgICAgICAgICAgICAgdXNlcnM6IFdvcmtvcmRlckNyZWF0ZU9iamVjdC51c2VySWRzLm1hcChnZXRVc2VyQnlJZCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBtdXRhdGUoewogICAgICAgICAgICAgICAgICBXb3Jrb3JkZXI6IFdvcmtvcmRlcgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoUHJvamVjdFdvcmtvcmRlcnMoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgbXV0YXRpb25zLnNldFByb2plY3QoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9qZWN0LnZhbHVlKSwge30sIHsKICAgICAgICAgICAgICAgICAgICB3b3Jrb3JkZXJzOiByZXMuZGF0YS5nZXRQcm9qZWN0V29ya29yZGVycwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW1pdCgnY2xvc2UnKTsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NUb2FzdCgnV29ya29yZGVyIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBjcmVhdGVkJykuc2hvd1RvYXN0KCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICAgIGVtaXQoJ2Nsb3NlJyk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDE0XV0pOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIFdvcmtvcmRlckNyZWF0ZU9iamVjdDogV29ya29yZGVyQ3JlYXRlT2JqZWN0LAogICAgICBwcm9qZWN0VXNlcnM6IHByb2plY3RVc2VycywKICAgICAgV29ya29yZGVyVHlwZTogV29ya29yZGVyVHlwZSwKICAgICAgaXNWYWxpZERUTzogaXNWYWxpZERUTywKICAgICAgV29ya29yZGVyVHlwZUNvcHk6IFdvcmtvcmRlclR5cGVDb3B5LAogICAgICBXb3Jrb3JkZXJQcmlvcml0eTogV29ya29yZGVyUHJpb3JpdHksCiAgICAgIFdvcmtvcmRlclByaW9yaXR5Q29weTogV29ya29yZGVyUHJpb3JpdHlDb3B5LAogICAgICBXb3Jrb3JkZXJQcmlvcml0eUNvbG9yczogV29ya29yZGVyUHJpb3JpdHlDb2xvcnMsCiAgICAgIHNldEZpZWxkVmFsdWU6IHNldEZpZWxkVmFsdWUsCiAgICAgIGhhbmRsZVN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBpc1dvcmtpbmc6IGlzV29ya2luZwogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/Project/Workorder/WorkorderCreate/WorkorderCreate.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, computed, reactive, ref } from '@vue/composition-api'\nimport { getters, mutations } from '@/store'\nimport {\n  Workorder,\n  WorkorderType,\n  WorkorderPriority,\n  WorkorderPriorityCopy,\n  WorkorderTypeCopy,\n  WorkorderStatus,\n  WorkorderCreateDTO\n} from '@/types/workorder'\nimport { WorkorderPriorityColors } from '@/utils/colors'\nimport { useMutation, useQuery } from '@vue/apollo-composable'\nimport {\n  createWorkorder,\n  getProjectWorkorders\n} from '@/graphql/queries/workorder'\nimport Omit from 'lodash.omit'\nimport { successToast, errorToast } from '../../../../plugins/toast'\ntype fieldType =\n  | 'type'\n  | 'title'\n  | 'description'\n  | 'reporterId'\n  | 'userIds'\n  | 'priority'\n  | 'status'\nexport default defineComponent({\n  setup(_, { emit }) {\n    const project = computed(getters.project)\n    const currentUser = computed(getters.currentUser)\n    const projectUsers = computed(() => {\n      if (!project.value) return []\n      return project.value.users.map(user => ({\n        value: user.id,\n        label: user.name,\n        user\n      }))\n    })\n\n    const defaultWorkorderValues = {\n      type: WorkorderType.TASK,\n      title: '',\n      description: '',\n      reporterId: currentUser.value.id,\n      userIds: [],\n      priority: WorkorderPriority.MEDIUM\n    }\n\n    const WorkorderCreateObject = reactive<WorkorderCreateDTO>(\n      defaultWorkorderValues\n    )\n    const isRequired = (value: string) =>\n      ['', null, undefined].indexOf(value) === -1\n\n    const isValidDTO = computed(\n      () =>\n        isRequired(WorkorderCreateObject.type) &&\n        isRequired(WorkorderCreateObject.title) &&\n        isRequired(WorkorderCreateObject.reporterId) &&\n        isRequired(WorkorderCreateObject.priority)\n    )\n\n    // eslint-disable-next-line\n    const setFieldValue = (field: fieldType, value: any) => {\n      WorkorderCreateObject[field] = (value as unknown) as never\n    }\n\n    const loading = ref<boolean>(false)\n\n    const { mutate, loading: isMutationLoading } = useMutation(createWorkorder)\n    const {\n      refetch: fetchProjectWorkorders,\n      loading: isFetchWorkordersLoading\n    } = useQuery<{\n      getProjectWorkorders: Workorder[]\n    }>(getProjectWorkorders)\n\n    const isWorking = computed(\n      () => loading.value && isFetchWorkordersLoading && isMutationLoading\n    )\n\n    const getUserById = (userId: string) =>\n      Omit(\n        project.value.users.find(user => user.id === userId),\n        ['__typename', 'name', 'avatarUrl', 'projectId']\n      )\n\n    const handleSubmit = async () => {\n      loading.value = true\n      const Workorder: WorkorderCreateDTO = {\n        ...WorkorderCreateObject,\n        status: WorkorderStatus.BACKLOG,\n        projectId: project.value.id,\n        users: WorkorderCreateObject.userIds.map(getUserById)\n      }\n      try {\n        // eslint-disable-next-line\n        await mutate({ Workorder } as any)\n        const res = await fetchProjectWorkorders()\n        if (res.data) {\n          mutations.setProject({\n            ...project.value,\n            workorders: res.data.getProjectWorkorders\n          })\n        }\n        loading.value = false\n        emit('close')\n        successToast('Workorder has been successfully created').showToast()\n      } catch (error) {\n        console.error(error)\n        emit('close')\n      }\n    }\n\n    return {\n      WorkorderCreateObject,\n      projectUsers,\n      WorkorderType,\n      isValidDTO,\n      WorkorderTypeCopy,\n      WorkorderPriority,\n      WorkorderPriorityCopy,\n      WorkorderPriorityColors,\n      setFieldValue,\n      handleSubmit,\n      isWorking\n    }\n  }\n})\n"],"sourceRoot":""}]}