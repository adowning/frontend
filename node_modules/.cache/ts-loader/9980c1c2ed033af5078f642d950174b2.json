{"remainingRequest":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js!/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js??ref--14-2!/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/shared/TextEditor/TextEditor.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/ash/Documents/cloudrun/second/frontend/src/components/shared/TextEditor/TextEditor.vue","mtime":1601932087349},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvYXNoL0RvY3VtZW50cy9jbG91ZHJ1bi9zZWNvbmQvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIG9uTW91bnRlZCwgcmVmLCB3YXRjaCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IFF1aWxsIGZyb20gJ3F1aWxsJzsKaW1wb3J0IHsgcXVpbGxDb25maWcgfSBmcm9tICcuL2VkaXRvcic7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogJ2otdGV4dC1lZGl0b3InLAogIHByb3BzOiB7CiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAogICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBlbWl0ID0gX3JlZi5lbWl0OwogICAgdmFyIHF1aWxsID0gcmVmKG51bGwpOwogICAgdmFyIGVkaXRvclJlZiA9IHJlZihudWxsKTsKICAgIHZhciBpbml0aWFsVmFsdWUgPSByZWYocHJvcHMudmFsdWUgfHwgcHJvcHMuZGVmYXVsdFZhbHVlKTsKCiAgICB2YXIgaW5pdFF1aWxsID0gZnVuY3Rpb24gaW5pdFF1aWxsKCkgewogICAgICByZXR1cm4gbmV3IFF1aWxsKGVkaXRvclJlZi52YWx1ZSwgX29iamVjdFNwcmVhZCh7CiAgICAgICAgcGxhY2Vob2xkZXI6IHByb3BzLnBsYWNlaG9sZGVyCiAgICAgIH0sIHF1aWxsQ29uZmlnKSk7CiAgICB9OwoKICAgIHZhciBlbmFibGVXcml0ZU1vZGUgPSBmdW5jdGlvbiBlbmFibGVXcml0ZU1vZGUoKSB7CiAgICAgIGVtaXQoJ2NoYW5nZU1vZGUnLCAnd3JpdGUnKTsKICAgIH07CgogICAgdmFyIGluc2VydFZhbHVlID0gZnVuY3Rpb24gaW5zZXJ0VmFsdWUocXVpbGwsIHZhbHVlKSB7CiAgICAgIHF1aWxsLmNsaXBib2FyZC5kYW5nZXJvdXNseVBhc3RlSFRNTCgwLCB2YWx1ZSk7CiAgICAgIHF1aWxsLmJsdXIoKTsKICAgIH07CgogICAgdmFyIGdldEhUTUxWYWx1ZSA9IGZ1bmN0aW9uIGdldEhUTUxWYWx1ZSgpIHsKICAgICAgdmFyIF9lZGl0b3JSZWYkdmFsdWUkcXVlcjsKCiAgICAgIHJldHVybiAoX2VkaXRvclJlZiR2YWx1ZSRxdWVyID0gZWRpdG9yUmVmLnZhbHVlLnF1ZXJ5U2VsZWN0b3IoJy5xbC1lZGl0b3InKSkgPT09IG51bGwgfHwgX2VkaXRvclJlZiR2YWx1ZSRxdWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZWRpdG9yUmVmJHZhbHVlJHF1ZXIuaW5uZXJIVE1MOwogICAgfTsKCiAgICB2YXIgaGFuZGxlQ29udGVudHNDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVDb250ZW50c0NoYW5nZSgpIHsKICAgICAgZW1pdCgnaW5wdXQnLCBnZXRIVE1MVmFsdWUoKSk7CiAgICB9OwoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLm1vZGU7CiAgICB9LCBmdW5jdGlvbiAoXywgZnJvbSkgewogICAgICBpZiAoZnJvbSA9PSAnd3JpdGUnKSB7CiAgICAgICAgdmFyIF9xdWlsbCR2YWx1ZTsKCiAgICAgICAgKF9xdWlsbCR2YWx1ZSA9IHF1aWxsLnZhbHVlKSA9PT0gbnVsbCB8fCBfcXVpbGwkdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9xdWlsbCR2YWx1ZS5zZXRUZXh0KCcnKTsKICAgICAgICBpbnNlcnRWYWx1ZShxdWlsbC52YWx1ZSwgcHJvcHMudmFsdWUpOwogICAgICAgIGluaXRpYWxWYWx1ZS52YWx1ZSA9IHByb3BzLnZhbHVlOwogICAgICB9CiAgICB9LCB7CiAgICAgIGxhenk6IHRydWUKICAgIH0pOwogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcXVpbGwudmFsdWUgPSBpbml0UXVpbGwoKTsKICAgICAgaW5zZXJ0VmFsdWUocXVpbGwudmFsdWUsIGluaXRpYWxWYWx1ZS52YWx1ZSk7CiAgICAgIHF1aWxsLnZhbHVlLm9uKCd0ZXh0LWNoYW5nZScsIGhhbmRsZUNvbnRlbnRzQ2hhbmdlKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3F1aWxsJHZhbHVlMjsKCiAgICAgICAgKF9xdWlsbCR2YWx1ZTIgPSBxdWlsbC52YWx1ZSkgPT09IG51bGwgfHwgX3F1aWxsJHZhbHVlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3F1aWxsJHZhbHVlMi5vZmYoJ3RleHQtY2hhbmdlJywgaGFuZGxlQ29udGVudHNDaGFuZ2UpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKCiAgICAgICAgcXVpbGwudmFsdWUgPSBudWxsOwogICAgICB9OwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBlZGl0b3JSZWY6IGVkaXRvclJlZiwKICAgICAgZ2V0SFRNTFZhbHVlOiBnZXRIVE1MVmFsdWUsCiAgICAgIGluaXRpYWxWYWx1ZTogaW5pdGlhbFZhbHVlLAogICAgICBlbmFibGVXcml0ZU1vZGU6IGVuYWJsZVdyaXRlTW9kZQogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/components/shared/TextEditor/TextEditor.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, onMounted, ref, watch } from '@vue/composition-api'\nimport Quill from 'quill'\nimport { quillConfig } from './editor'\nexport default defineComponent({\n  name: 'j-text-editor',\n  props: {\n    placeholder: {\n      type: String,\n      default: undefined\n    },\n    value: {\n      type: String,\n      default: undefined\n    },\n    defaultValue: {\n      type: String,\n      default: undefined\n    },\n    mode: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props, { emit }) {\n    const quill = ref<Quill>(null)\n    const editorRef = ref<HTMLDivElement>(null)\n    const initialValue = ref<string>(props.value || props.defaultValue)\n\n    const initQuill = () => {\n      return new Quill(editorRef.value as HTMLDivElement, {\n        placeholder: props.placeholder,\n        ...quillConfig\n      })\n    }\n\n    const enableWriteMode = () => {\n      emit('changeMode', 'write')\n    }\n\n    const insertValue = (quill: Quill, value: string) => {\n      quill.clipboard.dangerouslyPasteHTML(0, value)\n      quill.blur()\n    }\n\n    const getHTMLValue = () =>\n      (editorRef.value as HTMLDivElement).querySelector('.ql-editor')?.innerHTML\n\n    const handleContentsChange = () => {\n      emit('input', getHTMLValue())\n    }\n\n    watch(\n      () => props.mode,\n      (_, from) => {\n        if (from == 'write') {\n          quill.value?.setText('')\n          insertValue(quill.value as Quill, props.value)\n          initialValue.value = props.value\n        }\n      },\n      {\n        lazy: true\n      }\n    )\n\n    onMounted(() => {\n      quill.value = initQuill()\n      insertValue(quill.value, initialValue.value)\n      quill.value.on('text-change', handleContentsChange)\n      return () => {\n        quill.value?.off('text-change', handleContentsChange)\n        // eslint-disable-next-line\n        quill.value = null as any\n      }\n    })\n    return {\n      editorRef,\n      getHTMLValue,\n      initialValue,\n      enableWriteMode\n    }\n  }\n})\n"],"sourceRoot":""}]}