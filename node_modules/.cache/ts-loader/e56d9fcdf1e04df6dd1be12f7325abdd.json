{"remainingRequest":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js!/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js??ref--14-2!/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/views/Project/Settings.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/ash/Documents/cloudrun/second/frontend/src/views/Project/Settings.vue","mtime":1601936750531},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2FzaC9Eb2N1bWVudHMvY2xvdWRydW4vc2Vjb25kL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBjb21wdXRlZCwgcmVhY3RpdmUsIHJlZiB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHsgUHJvamVjdENhdGVnb3J5Q29weSwgUHJvamVjdENhdGVnb3J5IH0gZnJvbSAnQC90eXBlcy9wcm9qZWN0JzsKaW1wb3J0IHsgZ2V0dGVycywgbXV0YXRpb25zIH0gZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBwaWNrIGZyb20gJ2xvZGFzaC5waWNrJzsKaW1wb3J0IHsgdXNlTXV0YXRpb24sIHVzZVF1ZXJ5IH0gZnJvbSAnQHZ1ZS9hcG9sbG8tY29tcG9zYWJsZSc7CmltcG9ydCB7IHVwZGF0ZVByb2plY3QsIGdldFByb2plY3RXaXRoVXNlcnNBbmRXb3Jrb3JkZXJzIH0gZnJvbSAnQC9ncmFwaHFsL3F1ZXJpZXMvcHJvamVjdCc7CmltcG9ydCB7IHN1Y2Nlc3NUb2FzdCwgZXJyb3JUb2FzdCB9IGZyb20gJy4uLy4uL3BsdWdpbnMvdG9hc3QnOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBwcm9qZWN0ID0gY29tcHV0ZWQoZ2V0dGVycy5wcm9qZWN0KTsKICAgIHZhciBpc1dvcmtpbmcgPSByZWYoZmFsc2UpOwogICAgdmFyIHF1ZXJ5RW5hYmxlZCA9IHJlZihmYWxzZSk7CiAgICB2YXIgcHJvamVjdFVwZGF0ZURUTyA9IHJlYWN0aXZlKHBpY2socHJvamVjdC52YWx1ZSwgWyduYW1lJywgJ3VybCcsICdkZXNjcmlwdGlvbicsICdjYXRlZ29yeSddKSk7CgogICAgdmFyIGlzUmVxdWlyZWQgPSBmdW5jdGlvbiBpc1JlcXVpcmVkKHZhbHVlKSB7CiAgICAgIHJldHVybiBbJycsIG51bGwsIHVuZGVmaW5lZF0uaW5kZXhPZih2YWx1ZSkgPT09IC0xOwogICAgfTsKCiAgICB2YXIgaXNWYWxpZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGlzUmVxdWlyZWQocHJvamVjdFVwZGF0ZURUTy5uYW1lKSAmJiBpc1JlcXVpcmVkKHByb2plY3RVcGRhdGVEVE8uY2F0ZWdvcnkpOwogICAgfSk7CiAgICB2YXIgcHJvamVjdENhdGVnb3J5T3B0aW9ucyA9IE9iamVjdC52YWx1ZXMoUHJvamVjdENhdGVnb3J5KS5tYXAoZnVuY3Rpb24gKGNhdGVnb3J5KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IGNhdGVnb3J5LAogICAgICAgIGxhYmVsOiBQcm9qZWN0Q2F0ZWdvcnlDb3B5W2NhdGVnb3J5XQogICAgICB9OwogICAgfSk7CgogICAgdmFyIF91c2VNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHVwZGF0ZVByb2plY3QpLAogICAgICAgIG11dGF0ZSA9IF91c2VNdXRhdGlvbi5tdXRhdGU7CgogICAgdmFyIF91c2VRdWVyeSA9IHVzZVF1ZXJ5KGdldFByb2plY3RXaXRoVXNlcnNBbmRXb3Jrb3JkZXJzLCB7fSwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gewogICAgICAgIGZldGNoUG9saWN5OiAnbmV0d29yay1vbmx5JywKICAgICAgICBlbmFibGVkOiBxdWVyeUVuYWJsZWQudmFsdWUKICAgICAgfTsKICAgIH0pLAogICAgICAgIHJlZmV0Y2ggPSBfdXNlUXVlcnkucmVmZXRjaDsKCiAgICB2YXIgaGFuZGxlVXBkYXRlUHJvamVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBpc1dvcmtpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgICAgcXVlcnlFbmFibGVkLnZhbHVlID0gdHJ1ZTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gbXV0YXRlKHsKICAgICAgICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdFVwZGF0ZURUTwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZmV0Y2goKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICBtdXRhdGlvbnMuc2V0UHJvamVjdChyZXMuZGF0YS5nZXRQcm9qZWN0V2l0aFVzZXJzQW5kV29ya29yZGVycyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3VjY2Vzc1RvYXN0KCdDaGFuZ2VzIGhhdmUgYmVlbiBzYXZlZCBzdWNjZXNzZnVsbHkuJykuc2hvd1RvYXN0KCk7CiAgICAgICAgICAgICAgICBpc1dvcmtpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGlzV29ya2luZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgZXJyb3JUb2FzdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJykuc2hvd1RvYXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDEzXV0pOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlVXBkYXRlUHJvamVjdCgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIHByb2plY3Q6IHByb2plY3QsCiAgICAgIGlzV29ya2luZzogaXNXb3JraW5nLAogICAgICBwcm9qZWN0VXBkYXRlRFRPOiBwcm9qZWN0VXBkYXRlRFRPLAogICAgICBoYW5kbGVVcGRhdGVQcm9qZWN0OiBoYW5kbGVVcGRhdGVQcm9qZWN0LAogICAgICBpc1ZhbGlkOiBpc1ZhbGlkLAogICAgICBwcm9qZWN0Q2F0ZWdvcnlPcHRpb25zOiBwcm9qZWN0Q2F0ZWdvcnlPcHRpb25zCiAgICB9OwogIH0KfSk7"},{"version":3,"sources":["/home/ash/Documents/cloudrun/second/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ash/Documents/cloudrun/second/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ash/Documents/cloudrun/second/frontend/src/views/Project/Settings.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, computed, reactive, ref } from '@vue/composition-api'\nimport { ProjectCategoryCopy, ProjectCategory } from '@/types/project'\nimport { getters, mutations } from '@/store'\nimport pick from 'lodash.pick'\nimport { useMutation, useQuery } from '@vue/apollo-composable'\nimport {\n  updateProject,\n  getProjectWithUsersAndWorkorders\n} from '@/graphql/queries/project'\nimport { successToast, errorToast } from '../../plugins/toast'\n\nexport default defineComponent({\n  setup() {\n    const project = computed(getters.project)\n    const isWorking = ref<boolean>(false)\n    const queryEnabled = ref<boolean>(false)\n\n    const projectUpdateDTO = reactive(\n      pick(project.value, ['name', 'url', 'description', 'category'])\n    )\n\n    const isRequired = (value: string) =>\n      ['', null, undefined].indexOf(value) === -1\n\n    const isValid = computed(\n      () =>\n        isRequired(projectUpdateDTO.name) &&\n        isRequired(projectUpdateDTO.category)\n    )\n    const projectCategoryOptions = Object.values(ProjectCategory).map(\n      category => ({\n        value: category,\n        label: ProjectCategoryCopy[category]\n      })\n    )\n\n    const { mutate } = useMutation(updateProject)\n    const { refetch } = useQuery(getProjectWithUsersAndWorkorders, {}, () => ({\n      fetchPolicy: 'network-only',\n      enabled: queryEnabled.value\n    }))\n    const handleUpdateProject = async () => {\n      try {\n        isWorking.value = true\n        queryEnabled.value = true\n        // eslint-disable-next-line\n        await mutate({ project: projectUpdateDTO } as any)\n        const res = await refetch()\n        if (res.data) {\n          console.log(res.data)\n          mutations.setProject(res.data.getProjectWithUsersAndWorkorders)\n        }\n        successToast('Changes have been saved successfully.').showToast()\n        isWorking.value = false\n      } catch (error) {\n        isWorking.value = false\n        errorToast('An error has occurred').showToast()\n      }\n    }\n    return {\n      project,\n      isWorking,\n      projectUpdateDTO,\n      handleUpdateProject,\n      isValid,\n      projectCategoryOptions\n    }\n  }\n})\n"],"sourceRoot":""}]}